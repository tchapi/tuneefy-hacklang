Raphael.fn.pieChart=function(t,a,e,o,i,n){function r(t,a,e,o,i,n){var r=t+e*Math.cos(-o*h),p=t+e*Math.cos(-i*h),c=a+e*Math.sin(-o*h),l=a+e*Math.sin(-i*h);return s.path(["M",t,a,"L",r,c,"A",e,e,0,+(i-o>180),0,p,l,"z"]).attr(n)}for(var s=this,h=Math.PI/180,p=this.set(),c=0,l=0,u=0,f=0,m=o.length;f<m;f++)l+=o[f];for(f=0;f<m;f++)!function(n){var f=360*o[n]/l,m=c+f/2,d=r(t,a,e,c,c+f,{fill:Raphael.color("#"+i[n][2]),stroke:"none"}),M=s.text(t+(e+20+55)*Math.cos(-m*h),a+(e+20+25)*Math.sin(-m*h),i[n][1]).attr({fill:Raphael.color("#"+i[n][2]),stroke:"none",opacity:0,"font-size":16});f>13&&s.image("/img/platforms/platform_chart_"+i[n][0]+".png",t+.65*e*Math.cos(-m*h)-18,a+.65*e*Math.sin(-m*h)-15,36,30),d.mouseover(function(){d.stop().animate({transform:"s1.1 1.1 "+t+" "+a},500,"elastic"),M.stop().animate({opacity:1},500,"elastic")}).mouseout(function(){d.stop().animate({transform:""},500,"elastic"),M.stop().animate({opacity:0},500)}),c+=f,p.push(d),p.push(M),u+=.1}(f);return s.circle(t,a,e+10).attr({fill:"#2d2d2d",stroke:"none"}).toBack(),p},$(document).ready(function(){var t=[],a=[];$("table#pieData tr").each(function(){t.push(parseInt($("td",this).text(),10)),a.push(new Array($("th span.id",this).text(),$("th span.name",this).text(),$("th span.color",this).text()))});var e=$("#pieChart").outerWidth(),o=$("#pieChart").outerHeight();Raphael("pieChart",e,500).pieChart(e/2,250,Math.min(o/2.5,e/2.5),t,a,"#2d2d2d")});