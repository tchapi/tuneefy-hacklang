Raphael.fn.pieChart=function(M,$,v,g,x,t){var y=this,C=Math.PI/180,k=this.set();function a(t){var a,e,o,i,n,s,r,h,p,c,l=360*g[t]/z,f=R+l/2,u=500,m=(a=M,e=$,o=v,n=(i=R)+l,s={fill:Raphael.color("#"+x[t][2]),stroke:"none"},r=a+o*Math.cos(-i*C),h=a+o*Math.cos(-n*C),p=e+o*Math.sin(-i*C),c=e+o*Math.sin(-n*C),y.path(["M",a,e,"L",r,p,"A",o,o,0,+(180<n-i),0,h,c,"z"]).attr(s)),d=y.text(M+(v+20+55)*Math.cos(-f*C),$+(v+20+25)*Math.sin(-f*C),x[t][1]).attr({fill:Raphael.color("#"+x[t][2]),stroke:"none",opacity:0,"font-size":16});13<l&&y.image("/img/platforms/platform_chart_"+x[t][0]+".png",M+.65*v*Math.cos(-f*C)-18,$+.65*v*Math.sin(-f*C)-15,36,30),m.mouseover(function(){m.stop().animate({transform:"s1.1 1.1 "+M+" "+$},u,"elastic"),d.stop().animate({opacity:1},u,"elastic")}).mouseout(function(){m.stop().animate({transform:""},u,"elastic"),d.stop().animate({opacity:0},u)}),R+=l,k.push(m),k.push(d)}for(var R=0,z=0,e=0,o=g.length;e<o;e++)z+=g[e];for(e=0;e<o;e++)a(e);return y.circle(M,$,v+10).attr({fill:"#2d2d2d",stroke:"none"}).toBack(),k},$(document).ready(function(){var t=[],a=[];$("table#pieData tr").each(function(){t.push(parseInt($("td",this).text(),10)),a.push(new Array($("th span.id",this).text(),$("th span.name",this).text(),$("th span.color",this).text()))});var e=$("#pieChart").outerWidth(),o=$("#pieChart").outerHeight();Raphael("pieChart",e,500).pieChart(e/2,250,Math.min(o/2.5,e/2.5),t,a,"#2d2d2d")});